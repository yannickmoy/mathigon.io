<!DOCTYPE html><html class="ready"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Interactivity</title><meta name="description" content="Every step in a chapter can be linked to custom JavaScript code that sets up interactivity, events or personalisation."><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><meta http-equiv="cleartype" content="on"><meta property="og:title" content="Interactivity"><meta property="og:description" content="Every step in a chapter can be linked to custom JavaScript code that sets up interactivity, events or personalisation."><meta property="og:image" content="https://mathigon.org/images/og-tile/mathigon.jpg"><meta property="og:site_name" content="Mathigon"><meta name="twitter:site" content="@MathigonOrg"><link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,300,400i&amp;amp;subset=greek" rel="stylesheet" type="text/css"><link href="/styles.css?v=4" rel="stylesheet"></head><body><header><a id="logo" href="/"><svg class="icon" viewBox="0 0 36 36" width="36" height="36"><use xlink:href="/images/icons.svg?v=4#logo"></use></svg><svg class="icon" viewBox="0 0 120 36" width="120" height="36"><use xlink:href="/images/icons.svg?v=4#title-io"></use></svg></a><nav><x-popup class="nav-item" animation="fade"><button class="nav-link popup-target"><svg class="icon" viewBox="0 0 24 24" width="24" height="24"><use xlink:href="/images/icons.svg?v=4#glossary"></use></svg><span class="nav-text">TS Libraries</span></button><div class="popup-body"><a class="nav-link red" href="/core"><svg class="icon" viewBox="0 0 24 24" width="24" height="24"><use xlink:href="/images/icons.svg?v=4#construction"></use></svg>core.ts</a><a class="nav-link blue" href="/fermat"><svg class="icon" viewBox="0 0 24 24" width="24" height="24"><use xlink:href="/images/icons.svg?v=4#lightbulb"></use></svg>fermat.ts</a><a class="nav-link purple" href="/euclid"><svg class="icon" viewBox="0 0 24 24" width="24" height="24"><use xlink:href="/images/icons.svg?v=4#compass"></use></svg>euclid.ts</a><a class="nav-link yellow" href="/hilbert"><svg class="icon" viewBox="0 0 24 24" width="24" height="24"><use xlink:href="/images/icons.svg?v=4#equation"></use></svg>hilbert.ts</a><a class="nav-link green" href="/boost"><svg class="icon" viewBox="0 0 24 24" width="24" height="24"><use xlink:href="/images/icons.svg?v=4#brush"></use></svg>boost.ts</a></div></x-popup><x-popup class="nav-item" animation="fade"><button class="nav-link popup-target"><svg class="icon" viewBox="0 0 24 24" width="24" height="24"><use xlink:href="/images/icons.svg?v=4#library"></use></svg><span class="nav-text">Textbook Content</span></button><div class="popup-body"><a class="nav-link yellow" href="https://www.notion.so/mathigon/Content-Writing-718073cf25bf468b9d717735884803da"><svg class="icon" viewBox="0 0 24 24" width="24" height="24"><use xlink:href="/images/icons.svg?v=4#book"></use></svg>Content Guide</a><a class="nav-link blue" href="/markdown"><svg class="icon" viewBox="0 0 24 24" width="24" height="24"><use xlink:href="/images/icons.svg?v=4#notes"></use></svg>Markdown</a><a class="nav-link red" href="/interactivity"><svg class="icon" viewBox="0 0 24 24" width="24" height="24"><use xlink:href="/images/icons.svg?v=4#settings"></use></svg>Interactivity</a><a class="nav-link green" href="/translations"><svg class="icon" viewBox="0 0 24 24" width="24" height="24"><use xlink:href="/images/icons.svg?v=4#language"></use></svg>Translations</a></div></x-popup></nav></header><div class="x-red"><div class="hero slanted"><div class="container narrow"><h1><svg class="icon" viewBox="0 0 54 54" width="54" height="54"><use xlink:href="/images/icons.svg?v=4#settings"></use></svg>Interactivity</h1><p class="subtitle">Every step in a chapter can be linked to custom JavaScript code that sets up interactivity, events or personalisation.</p></div></div><div class="container narrow"><h1>Interactive Elements</h1>
<p>Many interactive elements share common functionality such as animating a DOM element or listening to
a slide gesture. For consistency, browser-compatibility and accessibility, we should use the
shared utility methods in the <a href="https://github.com/mathigon/boost.js"><strong>@mathigon/boost</strong></a> library.
Refer to its documentation for more information about:</p>
<ul>
<li><a href="https://github.com/mathigon/boost.js/blob/master/docs/elements.md">Element selection</a></li>
<li><a href="https://github.com/mathigon/boost.js/blob/master/docs/elements.md#svg-and-canvas-drawing">SVG and Canvas drawing</a></li>
<li><a href="https://github.com/mathigon/boost.js/blob/master/docs/animations.md">Animations</a></li>
<li><a href="https://github.com/mathigon/boost.js/blob/master/docs/events.md">Event hand gesture handling</a></li>
<li><a href="https://github.com/mathigon/boost.js/blob/master/docs/webcomponents.md">Custom Web Components</a></li>
</ul>
<h2>Linking Markdown and TypeScript</h2>
<p>Every course is divided into multiple steps, separated by <code>---</code>s. Every step has a unique ID which
is provided in the <code>&gt;</code> block at the beginning of a step, in the <code>content.md</code> file:</p>
<pre><code>---
&gt; id: my-step-1

{.my-class} Here is a paragraph

---
</code></pre>
<p><em>Note: Specifying an ID for every step is optional, but recommended since the IDs are used to
identify student progress in our database. Missing step IDs could lead to discrepancies if we
insert new steps into an existing course.</em></p>
<p>The step IDs correspond to the names of functions exported in the <code>functions.ts</code> file for the
same course. The function is executed whenever the step is revealed for the first time, and takes
a <code>$step</code> argument, which is a reference to the custom HTML <code>&lt;x-step&gt;</code> element that wraps around
the step. Check <a href="content/shared/types.d.ts">types.d.ts</a> for the available properties and methods.</p>
<pre><code>export function myStep1($step: Step) {
  const $paragraph = $step.$('.my-class');
}
</code></pre>
<p><em>Note: Step IDs are in <code>kebab-case</code> while function names are in <code>camelCase</code>.</em></p>
<h2>Goals and progress</h2>
<p>TODO...</p>
<h2>Models and templates</h2>
<p>Every step contains an observable object, which can be used to create reactive</p>
<pre><code class="language-ts">export function myStep1($step: Step) {
  $step.model.a = 10
  $step.model.b = 11
}
</code></pre>
<p>Any variables you assign to <code>$step.model</code> can then be accessed in Markdown. If the model changes,
the template will update automatically.</p>
<pre><code>Here is ${a} and ${b}.
</code></pre>
<p>Many built-in interactive elements automatically integrate with the model:</p>
<pre><code class="language-md">Here is a variable slider ${a}{a|5|0,10,1} and some variable values: a = ${a}, b = ${b}. Here
is a point: (${p.x},${p.y}).

Here is [a button](action:increment(1)) that triggers a function whenever you click it.

    // A large horizontal slider that binds to model.b
    x-slider(steps=100 :bind=&quot;b&quot;)

    // An interactive geopad component
    x-geopad(width=200 height=200): svg
      // This is a movable point that binds a Point instance to model.p
      circle.move(name=&quot;p&quot; cx=10 cy=10)
</code></pre>
<pre><code class="language-ts">export function myStep1($step: Step) {
  $step.model.click = (n: number) =&gt; $step.model.b += 1;

  console.log($step.model.p);  // Get the current value of model.p.

  $step.model.watch(() =&gt; {
    // This callback is triggered whenever model.p changes.
    console.log('point', $step.model.p);
  });
}
</code></pre>
<p><em>Note: The <code>model.watch</code> function is very efficient: when executed for the first time, it tracks
which model properties are accessed within its body. Then it will keep executing the callback any
time these properties change, but not when other properties of <code>model</code> change.</em></p>
<h2>GeoPads</h2>
<p><strong>GeoPad</strong> is a reusable component for displaying interactive, two-dimensional geometry diagrams
and coordinate systems. It is highly customisable and integrates well with Mathigon's TypeScript
libraries.</p>
<p>You can add a simple GeoPad instance in Markdown using this syntax:</p>
<pre><code class="language-html">x-geopad(width=600 height=200): svg
  circle.move.red(x=&quot;point(10,10)&quot; name=&quot;a&quot;)
  circle.blue(x=&quot;point(20,20)&quot; name=&quot;b&quot;)
  path.green(x=&quot;line(a,b)&quot;)
</code></pre>
<p>Every GeoPad needs to have an <code>&lt;svg&gt;</code> element as its child. The SVG can contain a number of
different elements: points are <code>&lt;circle&gt;</code>s and lines, circles, polygons or other paths are
<code>&lt;path&gt;</code>s. Every element should have an <code>x=</code> attribute that specifies its value. Elements can
optionally have a <code>name=</code> attribute with a (unique) ID.</p>
<p>Once you have given elements a name, you can reference them as parameters when creating new
elements, like in the <code>line(a,b)</code> example above, which creates a line from point <code>a</code> to point <code>b</code>.</p>
<p>Elements with a name are also added to the <code>model</code> of the step they appear in. This means that you
can dynamically change their value in TypeScript, or listen to events when their value changes:</p>
<pre><code class="language-ts">export function myStep($step: Step) {
  // Log the current value of point a.
  console.log($step.model.a);

  // Trigger a callback whenever point a changes.
  $step.model.watch(() =&gt; console.log($step.model.a));
}
</code></pre>
<h3>Creating new elements</h3>
<p>It is often easiest to specify all children of a GeoPad component in HTML. If you want to
dynamically add elements later, you can use the <code>.drawPoint()</code> and <code>.drawPath()</code> methods. Here
are some examples:</p>
<pre><code class="language-ts">$geopad.drawPoint(`point(10,10)`, {classes: 'red', name: 'p1'});
$geopad.drawPoint(new Point(10, 10), {classes: 'blue', name: 'p2'});
$geopad.drawPoint(({p1, p2}) =&gt; p1.rotate(Math.PI, p2), {classes: 'green', name: 'p3'});
$geopad.drawPath(`polygon(p1,p2, p3)`, {animated: 1000});
</code></pre>
<p>The first parameter can be an expression string, a geo element instance, or a function that
evaluates to a geo element. Supported options in the second argument are:</p>
<ul>
<li><code>classes?: string</code> – multiple space-separated classes to add to the DOM element</li>
<li><code>animated?: boolean</code> – whether to animate the drawing of this element</li>
<li><code>name?: string</code> – which name to give this element, so that its value can be referenced elsewhere</li>
<li><code>target?: string</code> – the target attribute for this element, which can be used to highlight it
when hovering over certain expressions in the same steps</li>
<li><code>interactive?: boolean</code> – only for points: whether this element is interactive or fixed</li>
</ul>
<h3>Model functions</h3>
<p>When specifying the value of an element using the <code>x=</code> attribute in HTML, or using a string as the
first argument of the <code>drawPoint/drawPath</code> functions, you and enter an arbitrary JavaScript
expression. The following special variables and are automatically added to <code>$step.model</code>:</p>
<table>
<thead>
<tr>
<th>Expression</th>
<th>Return value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>pi</code></td>
<td><code>Math.PI</code></td>
</tr>
<tr>
<td><code>point(a,b)</code></td>
<td><code>new Point(a, b)</code></td>
</tr>
<tr>
<td><code>angle(a,b,c)</code></td>
<td><code>new Angle(a, b, c)</code></td>
</tr>
<tr>
<td><code>line(a,b)</code></td>
<td><code>new Line(a, b)</code></td>
</tr>
<tr>
<td><code>ray(a,b)</code></td>
<td><code>new Ray(a, b)</code></td>
</tr>
<tr>
<td><code>segment(a,b)</code></td>
<td><code>new Segment(a, b)</code></td>
</tr>
<tr>
<td><code>circle(a,b)</code></td>
<td><code>new Circle(a, b)</code></td>
</tr>
<tr>
<td><code>arc(a,b,c)</code></td>
<td><code>new Arc(a, b, c)</code></td>
</tr>
<tr>
<td><code>sector(a,b,c)</code></td>
<td><code>new Sector(a, b, c)</code></td>
</tr>
<tr>
<td><code>polygon(...points)</code></td>
<td><code>new Polygon(...Points)</code></td>
</tr>
<tr>
<td><code>polyline(...points)</code></td>
<td><code>new Polyline(...Points)</code></td>
</tr>
<tr>
<td><code>triangle(a,b,c)</code></td>
<td><code>new Triangle(a, b, c)</code></td>
</tr>
<tr>
<td><code>rectangle(a,w,h)</code></td>
<td><code>new Rectangle(a, w, h)</code></td>
</tr>
<tr>
<td><code>distance(a,b)</code></td>
<td><code>Point.distance(a, b)</code></td>
</tr>
<tr>
<td><code>round(a)</code></td>
<td><code>Fermat.round(a)</code></td>
</tr>
<tr>
<td><code>sqrt(a,b)</code></td>
<td><code>Math.sqrt(a, b)</code></td>
</tr>
<tr>
<td><code>floor(a,b)</code></td>
<td><code>Math.floor(a, b)</code></td>
</tr>
<tr>
<td><code>ceil(a,b)</code></td>
<td><code>Math.ceil(a, b)</code></td>
</tr>
<tr>
<td><code>intersections(...els)</code></td>
<td><code>Fermat.intersections(...els)</code></td>
</tr>
</tbody>
</table>
<p>All of these functions are <em>safe</em>, for example, if you call <code>line(a,b)</code> and either <code>a</code> or <code>b</code> is
<code>undefined</code>, it will also return <code>undefined</code> (rather than throw an Error, or return an invalid
<code>Line</code> instance). This is particularly important when dealing with interactive elements: if the
user moves points in a way that removes certain elements (e.g. the intersection of two lines),
all the children of those elements will simply disappear.</p>
<p>If you want to use other functions in your expressions, you can simply add them to <code>$step.model</code>.</p>
<h2>Coordinate systems</h2>
<p>TODO…</p>
<footer class="global-footer"><div class="footer-left"><a href="https://mathigon.org">Mathigon.org</a><span class="dot">•</span><a href="https://github.com/mathigon">Mathigon on Github</a><span class="dot">•</span><a href="https://mathigon.org/policies">Terms and Privacy</a></div><div class="footer-right">© Mathigon</div></footer></div></div><script src="/scripts.js?v=4"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q || []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-37525836-5', 'auto');
ga('send', 'pageview');</script></body></html>