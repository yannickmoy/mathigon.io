/* (c) Mathigon */
!function(){"use strict";function t(t,...e){return e.includes(t)}const e=(t,e)=>t.concat(e);function n(){let t=()=>void 0,e=()=>void 0;const n=new Promise((n,i)=>{t=n,e=i});return n.catch(t=>t),{promise:n,resolve:t,reject:e}}function i(t,e=0,n=!1){let i=!1,r=!1;return(...s)=>{i?r=!0:(n?r=!0:t(...s),i=!0,setTimeout(()=>{r&&t(...s),i=r=!1},e))}}function r(t,e={}){if(!t)return e;try{return JSON.parse(t)||e}catch(t){return e}}function s(t,e=0){return t[t.length-1-e]}function o(t){return t.reduce((t,e)=>t+e,0)}function a(t,e=/\s+/){return t?t.trim().split(e):[]}class c{constructor(){this.events=new Map}on(t,e){for(const n of a(t))this.events.has(n)||this.events.set(n,[]),this.events.get(n).push(e)}one(t,e){const n=i=>{this.off(t,n),e(i)};this.on(t,n)}off(t,e){for(const n of a(t))this.events.has(n)&&this.events.set(n,this.events.get(n).filter(t=>t!==e))}trigger(t,e){for(const n of a(t))if(this.events.has(n))for(const t of this.events.get(n))t(e)}}const l=1e-6;function h(t,e,n=l){return!isNaN(t)&&!isNaN(e)&&Math.abs(t-e)<n}function u(t,e,n,i=l){return e>n&&([e,n]=[n,e]),t>e+i&&t<n-i}function d(t,e=1){return Math.round(t/e)*e}function p(t,e=-1/0,n=1/0){return Math.min(n,Math.max(e,t))}function f(t,e,n=.5){return t+(e-t)*n}function g(t){return t*t}function w(t,e=0){const n=function t(e){if(1===e.length)return[[],e];const n=e.pop(),i=t(e),r=[];for(const t of i)r.push(t,[...t,n]);return r}(t.slice(0));return e?n.filter(t=>t.length===e):n}const m=2*Math.PI;function y(t,e){return function(t,e){return(t%e+e)%e}(Math.atan2(t.y-(e?e.y:0),t.x-(e?e.x:0)),m)}class v{constructor(t=0,e=0){this.x=t,this.y=e,this.type="point"}get unitVector(){return h(this.length,0)?new v(1,0):this.scale(1/this.length)}get length(){return Math.sqrt(this.x**2+this.y**2)}get inverse(){return new v(-this.x,-this.y)}get flip(){return new v(this.y,this.x)}get perpendicular(){return new v(-this.y,this.x)}get array(){return[this.x,this.y]}distanceFromLine(t){return v.distance(this,t.project(this))}clamp(t,e=0){const n=p(this.x,t.xMin+e,t.xMax-e),i=p(this.y,t.yMin+e,t.yMax-e);return new v(n,i)}changeCoordinates(t,e){const n=e.xMin+(this.x-t.xMin)/t.dx*e.dx,i=e.yMin+(this.y-t.yMin)/t.dy*e.dy;return new v(n,i)}add(t){return v.sum(this,t)}subtract(t){return v.difference(this,t)}round(t=1){return new v(d(this.x,t),d(this.y,t))}floor(){return new v(Math.floor(this.x),Math.floor(this.y))}mod(t,e=t){return new v(this.x%t,this.y%e)}angle(t=x){return y(this,t)}static average(...t){const e=o(t.map(t=>t.x))/t.length,n=o(t.map(t=>t.y))/t.length;return new v(e,n)}static dot(t,e){return t.x*e.x+t.y*e.y}static sum(t,e){return new v(t.x+e.x,t.y+e.y)}static difference(t,e){return new v(t.x-e.x,t.y-e.y)}static distance(t,e){return Math.sqrt(g(t.x-e.x)+g(t.y-e.y))}static manhattan(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}static interpolate(t,e,n=.5){return new v(f(t.x,e.x,n),f(t.y,e.y,n))}static interpolateList(t,e=.5){const n=t.length-1,i=Math.floor(p(e,0,1)*n);return v.interpolate(t[i],t[i+1],n*e-i)}static fromPolar(t,e=1){return new v(e*Math.cos(t),e*Math.sin(t))}transform(t){const e=t[0][0]*this.x+t[0][1]*this.y+t[0][2],n=t[1][0]*this.x+t[1][1]*this.y+t[1][2];return new v(e,n)}rotate(t,e=x){const n=this.x-e.x,i=this.y-e.y,r=Math.cos(t),s=Math.sin(t),o=n*r-i*s+e.x,a=n*s+i*r+e.y;return new v(o,a)}reflect(t){const e=t.p2.x-t.p1.x,n=t.p2.y-t.p1.y,i=this.x-t.p1.x,r=(e*(this.y-t.p1.y)-n*i)/(e*e+n*n),s=this.x+2*r*n,o=this.y-2*r*e;return new v(s,o)}scale(t,e=t){return new v(this.x*t,this.y*e)}shift(t,e=t){return new v(this.x+t,this.y+e)}translate(t){return this.shift(t.x,t.y)}equals(t){return h(this.x,t.x)&&h(this.y,t.y)}}const x=new v(0,0);class b{constructor(t,e){this.p1=t,this.p2=e,this.type="line"}make(t,e){return new b(t,e)}get length(){return v.distance(this.p1,this.p2)}get lengthSquared(){return(this.p1.x-this.p2.x)**2+(this.p1.y-this.p2.y)**2}get midpoint(){return v.average(this.p1,this.p2)}get slope(){return(this.p2.y-this.p1.y)/(this.p2.x-this.p1.x)}get intercept(){return this.p1.y+this.slope*this.p1.x}get angle(){return y(this.p2,this.p1)}get unitVector(){return this.p2.subtract(this.p1).unitVector}get perpendicularVector(){return new v(this.p2.y-this.p1.y,this.p1.x-this.p2.x).unitVector}parallel(t){const e=v.sum(t,v.difference(this.p2,this.p1));return new b(t,e)}perpendicular(t){return new b(t,v.sum(t,this.perpendicularVector))}get perpendicularBisector(){return this.perpendicular(this.midpoint)}distanceSquared(t){const e=this.project(t);return(t.x-e.x)**2+(t.y-e.y)**2}project(t){const e=v.difference(this.p2,this.p1),n=v.difference(t,this.p1),i=e.scale(v.dot(e,n)/this.lengthSquared);return v.sum(this.p1,i)}contains(t){return h(t.x*(this.p1.y-this.p2.y)+this.p1.x*(this.p2.y-t.y)+this.p2.x*(t.y-this.p1.y),0)}at(t){return v.interpolate(this.p1,this.p2,t)}transform(t){return new this.constructor(this.p1.transform(t),this.p2.transform(t))}rotate(t,e=x){return new this.constructor(this.p1.rotate(t,e),this.p2.rotate(t,e))}reflect(t){return new this.constructor(this.p1.reflect(t),this.p2.reflect(t))}scale(t,e=t){return this.make(this.p1.scale(t,e),this.p2.scale(t,e))}shift(t,e=t){return this.make(this.p1.shift(t,e),this.p2.shift(t,e))}translate(t){return this.shift(t.x,t.y)}equals(t){return this.contains(t.p1)&&this.contains(t.p2)}}function _(t){return["polygon","polyline","rectangle","triangle"].includes(t.type)}function C(t){return["polygon","triangle"].includes(t.type)}function A(t){return"polyline"===t.type}function M(t){return["line","ray","segment"].includes(t.type)}function k(t){return"segment"===t.type}function L(t){return"circle"===t.type}function T(t,e){return h(t.p1.x,t.p2.x)?u(e.y,t.p1.y,t.p2.y):u(e.x,t.p1.x,t.p2.x)}function $(t,e){return h(t.p1.x,t.p2.x)?(e.y-t.p1.y)/(t.p2.y-t.p1.y)>0:(e.x-t.p1.x)/(t.p2.x-t.p1.x)>0}function E(t,e){const n=t.p2.x-t.p1.x,i=t.p2.y-t.p1.y,r=g(n)+g(i),s=e.c.x,o=e.c.y,a=(t.p1.x-s)*(t.p2.y-o)-(t.p2.x-s)*(t.p1.y-o),c=g(e.r)*r-g(a);if(c<0)return[];const l=a*i/r,u=-a*n/r;if(h(c,0))return[e.c.shift(l,u)];const d=n*(i<0?-1:1)*Math.sqrt(c)/r,p=Math.abs(i)*Math.sqrt(c)/r;return[e.c.shift(l+d,u+p),e.c.shift(l-d,u-p)]}function O(t,e){let n=[];M(t)&&M(e)?n=function(t,e){const n=t.p1.x-t.p2.x,i=t.p1.y-t.p2.y,r=e.p1.x-e.p2.x,s=e.p1.y-e.p2.y,o=n*s-i*r;if(h(o,0))return[];const a=t.p1.x*t.p2.y-t.p1.y*t.p2.x,c=e.p1.x*e.p2.y-e.p1.y*e.p2.x;return[new v((a*r-n*c)/o,(a*s-i*c)/o)]}(t,e):M(t)&&L(e)?n=E(t,e):L(t)&&M(e)?n=E(e,t):L(t)&&L(e)&&(n=function(t,e){const n=v.distance(t.c,e.c);if(n>t.r+e.r)return[];if(n<Math.abs(t.r-e.r))return[];if(h(n,0)&&h(t.r,e.r))return[];if(h(n,t.r+e.r))return[new b(t.c,e.c).midpoint];const i=(g(t.r)-g(e.r)+g(n))/(2*n),r=Math.sqrt(g(t.r)-g(i)),s=(e.c.x-t.c.x)*i/n+(e.c.y-t.c.y)*r/n+t.c.x,o=(e.c.y-t.c.y)*i/n-(e.c.x-t.c.x)*r/n+t.c.y,a=(e.c.x-t.c.x)*i/n-(e.c.y-t.c.y)*r/n+t.c.x,c=(e.c.y-t.c.y)*i/n+(e.c.x-t.c.x)*r/n+t.c.y;return[new v(s,o),new v(a,c)]}(t,e));for(const i of[t,e])"segment"===i.type&&(n=n.filter(t=>T(i,t))),"ray"===i.type&&(n=n.filter(t=>$(i,t)));return n}function S(...t){if(t.length<2)return[];if(t.length>2)return function t(e){return e.reduce((e,n)=>e.concat(Array.isArray(n)?t(n):n),[])}(w(t,2).map(t=>S(...t)));let[e,n]=t;if(_(n)&&([e,n]=[n,e]),_(e)){const t=M(n)?e.points.filter(t=>n.contains(t)):[];for(const i of e.edges)t.push(...S(i,n));return t}return O(e,n)}function P(t,e,n){const i=e.x*(n.y-t.y)+t.x*(e.y-n.y)+n.x*(t.y-e.y)>0?1:0,r=v.distance(e,t);return[t.x,t.y+"A"+r,r,0,i,1,n.x,n.y].join(",")}function I(t,e={}){let n=t.a;const i=t.b;let r=t.c;const s=e.size||function(t,e={}){return t.isRight&&!e.round?20:24+20*(1-p(t.rad,0,Math.PI)/Math.PI)}(t,e),o=v.difference(n,i).unitVector,a=v.difference(r,i).unitVector;n=v.sum(i,o.scale(s)),r=v.sum(i,a.scale(s));let c=e.fill?`M${i.x},${i.y}L`:"M";if(t.isRight&&!e.round){const t=v.sum(n,a.scale(s));c+=`${n.x},${n.y}L${t.x},${t.y}L${r.x},${r.y}`}else c+=P(n,i,r);return e.fill&&(c+="Z"),c}function V(...t){return"M"+t.map(t=>t.x+","+t.y).join("L")}function N(t,e){const n=t.perpendicularVector.scale(6),i=t.unitVector.scale(3),r=t.midpoint;switch(e){case"bar":return V(r.add(n),r.add(n.inverse));case"bar2":return V(r.add(i).add(n),r.add(i).add(n.inverse))+V(r.add(i.inverse).add(n),r.add(i.inverse).add(n.inverse));case"arrow":return V(r.add(i.inverse).add(n),r.add(i),r.add(i.inverse).add(n.inverse));case"arrow2":return V(r.add(i.scale(-2)).add(n),r,r.add(i.scale(-2)).add(n.inverse))+V(r.add(n),r.add(i.scale(2)),r.add(n.inverse));default:return""}}function q(t,e){if(!t||!e)return"";const n=e.perpendicular,i=t.add(e.scale(9)).add(n.scale(9)),r=t.add(e.scale(9)).add(n.scale(-9));return V(i,t,r)}function H(e,n={}){if("angle"===e.type)return I(e,n);if(k(e)){if(e.p1.equals(e.p2))return"";let i=V(e.p1,e.p2);return n.mark&&(i+=N(e,n.mark)),n.arrows&&(i+=function(e,n){let i="";return t(n,"start","both")&&(i+=q(e.p1,e.unitVector)),t(n,"end","both")&&(i+=q(e.p2,e.unitVector.inverse)),i}(e,n.arrows)),i}if(function(t){return"ray"===t.type}(e)){if(!n.box)return"";const t=S(e,n.box)[0];return t?V(e.p1,t):""}if(function(t){return"line"===t.type}(e)){if(!n.box)return"";const t=S(e,n.box);if(t.length<2)return"";let i=V(t[0],t[1]);return n.mark&&(i+=N(e,n.mark)),i}if(L(e))return`M ${e.c.x-e.r} ${e.c.y} a ${e.r},${e.r} 0 1 0 `+`${2*e.r} 0 a ${e.r} ${e.r} 0 1 0 ${-2*e.r} 0`;if(function(t){return"arc"===t.type}(e)){let i="M"+P(e.start,e.c,e.end);return n.arrows&&(i+=function(e,n){let i="";if(t(n,"start","both")){const t=new b(e.c,e.start).perpendicularVector.inverse;i+=q(e.start,t)}if(t(n,"end","both")){const t=new b(e.c,e.end).perpendicularVector;i+=q(e.end,t)}return i}(e,n.arrows)),i}return function(t){return"sector"===t.type}(e)?`M ${e.c.x} ${e.c.y} L ${P(e.start,e.c,e.end)} Z`:A(e)?V(...e.points):C(e)?V(...e.points)+"Z":function(t){return"rectangle"===t.type}(e)?V(...e.polygon.points)+"Z":""}function R(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}))}function W(t){const e=[];for(let n of Object.keys(t)){let i=t[n];n=encodeURIComponent(n),null!=i?(i=(i=Array.isArray(i)?i.join(","):""+i).replace(/(\r)?\n/g,"\r\n"),i=(i=encodeURIComponent(i)).replace(/%20/g,"+"),e.push(n+"="+i)):e.push(n)}return e.join("&")}function j(t,e){return R(this,void 0,void 0,(function*(){const n={method:"POST",body:e?"string"==typeof e?e:W(e):void 0,headers:{"Content-Type":"application/x-www-form-urlencoded","X-CSRF-Token":window.csrfToken||""}},i=t.includes("?")?"&xhr=1":"?xhr=1",r=yield fetch(t+i,n);if(!r.ok)throw new Error(`Fetch error ${r.status}: ${t}`);return r.text()}))}const z=new Map;function B(t,n){z.has(t)?function t(n,i,r=e){for(const e of Object.keys(i))e in n&&Array.isArray(n[e])&&Array.isArray(i[e])?n[e]=r(n[e],i[e]):e in n&&n[e]instanceof Object&&i[e]instanceof Object?t(n[e],i[e]):n[e]=i[e]}(z.get(t),n,(t,e)=>(function(t){return t.filter((e,n)=>t.indexOf(e)===n)})(t.concat(e))):z.set(t,n)}function F(){if(window.navigator.onLine)for(const[t,e]of z)z.delete(t),j(t,{data:JSON.stringify(e)}).catch(n=>{console.error("Failed to send POST request:",n),B(t,e)})}const U=i(F,5e3);var X;window.addEventListener("online",U),window.onbeforeunload=F,function(t){t[t.Array=0]="Array",t[t.BinaryOp=1]="BinaryOp",t[t.Call=2]="Call",t[t.Conditional=3]="Conditional",t[t.Identifier=4]="Identifier",t[t.Literal=5]="Literal",t[t.Member=6]="Member",t[t.UnaryOp=7]="UnaryOp"}(X||(X={}));const D={"===":(t,e)=>t===e,"!==":(t,e)=>t!==e,"||":(t,e)=>t||e,"&&":(t,e)=>t&&e,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,"<=":(t,e)=>t<=e,">=":(t,e)=>t>=e,"**":(t,e)=>Math.pow(t,e),"<":(t,e)=>t<e,">":(t,e)=>t>e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e},G={"-":t=>-t,"+":t=>+t,"!":t=>!t},K={"||":1,"&&":2,"==":3,"!=":3,"===":3,"!==":3,"<":4,">":4,"<=":4,">=":4,"+":5,"-":5,"*":6,"/":6,"%":6,"**":7},Y={true:!0,false:!1,undefined:void 0},J=/\s/,Z=/[0-9]/,Q=/[a-zA-Zα-ωΑ-Ω$_]/,tt=/[0-9a-zA-Zα-ωΑ-Ω$_]/;function et(t){const e=t.length;let n=0;function i(e){throw new Error(`${e} at character ${n} of "${t}"`)}function r(){for(;J.test(t[n]);)n+=1}function s(){let r=t[n];for(Q.test(t[n])||i("Unexpected "+r),n+=1;n<e&&tt.test(t[n]);)r+=t[n++];return r in Y?{type:X.Literal,value:Y[r]}:{type:X.Identifier,name:r}}function o(r){const s=[];let o=!1,a=void 0;for(;n<e;){if(t[n]===r){a&&s.push(a),o=!0,n+=1;break}","===t[n]?(s.push(a||{type:X.Literal,value:void 0}),n+=1):a=l()}return o||i("Expected "+r),s}function a(){r();for(const e of[3,2,1]){const i=t.substr(n,e);if(i in D)return n+=e,i}}function c(){r();const a=t[n];return Z.test(a)||"."===a?function(){let e="";for(;Z.test(t[n]);)e+=t[n++];if("."===t[n])for(e+=t[n++];Z.test(t[n]);)e+=t[n++];const r=t[n];if(r&&Q.test(r)){i(`Variable names cannot start with a number (${e+t[n]})`)}else"."===r&&i("Unexpected period");return{type:X.Literal,value:parseFloat(e)}}():"'"===a||'"'===a?function(){const r=t[n];n+=1;let s=!1,o="";for(;n<e;){const e=t[n++];if(e===r){s=!0;break}o+=e}return s||i(`Unclosed quote after "${o}"`),{type:X.Literal,value:o}}():"["===a?(n+=1,{type:X.Array,elements:o("]")}):a in G?(n+=1,{type:X.UnaryOp,operator:a,argument:c()}):Q.test(a)||"("===a?function(){let e;if("("===t[n]){if(n+=1,e=l(),r(),")"===t[n])return n+=1,e;i("Unclosed (")}else e=s();for(r();".[(".includes(t[n]);)"."===t[n]?(n++,r(),e={type:X.Member,object:e,computed:!1,property:s()}):"["===t[n]?(n++,e={type:X.Member,object:e,computed:!0,property:l()},r(),"]"!==t[n]&&i("Unclosed ["),n++):"("===t[n]&&(n++,e={type:X.Call,args:o(")"),callee:e}),r();return e}():void i("Expression parsing error")}function l(){const e=function(){let t=c(),e=a();if(!e)return t;let n,r=c();r||i("Expected expression after "+e);const s=[t,e,r];for(;e=a();){const o=K[e],a=e;for(;s.length>2&&o<=K[s[s.length-2]];)r=s.pop(),e=s.pop(),t=s.pop(),n={type:X.BinaryOp,operator:e,left:t,right:r},s.push(n);(n=c())||i("Expected expression after "+a),s.push(a,n)}let o=s.length-1;for(n=s[o];o>1;)n={type:X.BinaryOp,operator:s[o-1],left:s[o-2],right:n},o-=2;return n}();if(r(),!e||"?"!==t[n])return e;{n+=1;const s=l();if(s||i("Expected expression"),r(),":"===t[n]){n++;const t=l();return t||i("Expected expression"),{type:X.Conditional,test:e,consequent:s,alternate:t}}i("Expected :")}}const h=l();return n<t.length&&i(`Unexpected "${t[n]}"`),h}const nt=[void 0,void 0];function it(t){const e=et(t);return e?(t={})=>(function t(e,n){switch(e.type){case X.Array:const i=e.elements.map(e=>t(e,n)[0]);return i.some(t=>void 0===t)?nt:[i,void 0];case X.BinaryOp:const r=t(e.left,n)[0],s=t(e.right,n)[0];return!"+-**/%".includes(e.operator)||void 0!==r&&void 0!==s?[D[e.operator](r,s),void 0]:nt;case X.Call:const[o,a]=t(e.callee,n),c=e.args.map(e=>t(e,n)[0]);return c.some(t=>void 0===t)||"function"!=typeof o?nt:[o.apply(a,c),void 0];case X.Conditional:const l=t(e.consequent,n),h=t(e.alternate,n);return t(e.test,n)[0]?l:h;case X.Identifier:return[n[e.name],void 0];case X.Literal:return[e.value,void 0];case X.Member:const u=t(e.object,n)[0],d=e.computed?t(e.property,n)[0]:e.property.name;return u?[u[d],u]:[void 0,void 0];case X.UnaryOp:const p=t(e.argument,n)[0];return void 0===p?nt:[G[e.operator](p),void 0]}})(e,t)[0]:(t={})=>void 0}const rt=/\${([^}]+)}/g;function st(t){const e=t.split(rt),n=e.map((t,e)=>e%2?it(t.replace(/×/g,"*")):void 0);return t=>e.map((e,i)=>{if(!(i%2))return e;const r=n[i](t);return"number"==typeof r&&r<0?"–"+-r:r}).join("")}const ot="ontouchstart"in window,at="onpointerdown"in window;function ct(t){if(t.touches){const e=t.targetTouches.length?t.targetTouches:t.changedTouches;return new v(e[0].clientX,e[0].clientY)}return new v(t.clientX||0,t.clientY||0)}let lt;function ht(t){for(const e of t){const t=e.isIntersecting?"enterViewport":"exitViewport";setTimeout(()=>Ot(e.target).trigger(t))}}function ut(t){if(!t._data.intersectionEvents)if(t._data.intersectionEvents=!0,window.IntersectionObserver)lt||(lt=new IntersectionObserver(ht)),lt.observe(t._el);else{let e=!1;Pt.on("scroll",()=>{const n=t.isInViewport;e&&!n?(t.trigger("exitViewport"),e=!1):n&&!e&&(t.trigger("enterViewport"),e=!0)})}}function dt(t){if(t._data.pointerPositionEvents)return;t._data.pointerPositionEvents=!0;const e=t.parent;let n=void 0;e.on("pointerend",()=>n=void 0),e.on("pointermove",e=>{const i=n,r=function(t){if(t instanceof PointerEvent&&"mouse"===t.pointerType)return Ot(t.target);const e=ct(t);return Ot(document.elementFromPoint(e.x,e.y)||void 0)}(e);n=r.equals(t)||r.hasParent(t),null!=i&&n&&!i&&t.trigger("pointerenter",e),!n&&i&&t.trigger("pointerleave",e)})}function pt(t,e){e._data["_"+t]||(e._data["_"+t]=!0,at?e.on(t.replace("mouse","pointer"),n=>{"mouse"===n.pointerType&&e.trigger(t,n)}):ot||e._el.addEventListener(t,n=>e.trigger(t,n)))}const ft={scrollwheel:"DOMMouseScroll mousewheel",pointerdown:at?"pointerdown":ot?"touchstart":"mousedown",pointermove:at?"pointermove":ot?"touchmove":"mousemove",pointerup:at?"pointerup":ot?"touchend":"mouseup",pointercancel:at?"pointercancel":"touchcancel",pointerstop:at?"pointerup pointercancel":ot?"touchend touchcancel":"mouseup"},gt={scroll:function(t){if(t._data.scrollEvents)return;t._data.scrollEvents=!0;let e=!1,n=void 0;function i(){const r=t.scrollTop;r!==n?(n=r,t.trigger("scroll",{top:n}),window.requestAnimationFrame(i)):e=!1}function r(){e||window.requestAnimationFrame(i),e=!0}function s(){window.removeEventListener("touchmove",r),window.removeEventListener("touchend",s)}("window"===t.type?window:t._el).addEventListener("scroll",r),t._el.addEventListener("touchstart",(function(t){t.handled||(window.addEventListener("touchmove",r),window.addEventListener("touchend",s))}))},tap:function(t){if(t._data.tapEvent)return;t._data.tapEvent=!0;let e=void 0;t.on("pointerdown",t=>e=ct(t)),t.on("pointerup",n=>{if(!e)return;const i=ct(n);v.distance(e,i)<6&&t.trigger("tap",n),e=void 0}),t.on("pointercancel",()=>e=void 0)},clickOutside:function(t){t._data.clickOutsideEvent||(t._data.clickOutsideEvent=!0,Pt.on("pointerdown",e=>{const n=Ot(e.target);n&&(n.equals(t)||n.hasParent(t))||t.trigger("clickOutside",e)}))},key:function(t){t.on("keydown",e=>{if(e.metaKey||e.ctrlKey)return;if(Nt.isAndroid&&229===e.keyCode)return;const n=(e.key||String.fromCharCode(e.which)).toLowerCase();t.trigger("key",{code:e.keyCode,key:n})}),Nt.isAndroid&&"input"===t.type&&t.on("input",e=>{const n=e.data[e.data.length-1].toLowerCase();t.trigger("key",{code:void 0,key:n}),t.value=""})},mousedown:pt.bind(void 0,"mousedown"),mousemove:pt.bind(void 0,"mousemove"),mouseup:pt.bind(void 0,"mouseup"),pointerenter:dt,pointerleave:dt,enterViewport:ut,exitViewport:ut,resize:function(t,e=!1){if(e&&(t._data.resizeObserver&&t._data.resizeObserver.disconnect(),t._data.resizeObserver=void 0),!t._data.resizeObserver)if(window.ResizeObserver){const e=new window.ResizeObserver(()=>t.trigger("resize"));e.observe(t._el),t._data.resizeObserver=e}else if(window.MutationObserver){const e=new MutationObserver(()=>t.trigger("resize"));e.observe(t._el,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),t._data.resizeObserver=e}}};function wt(t,e,n,i){if(e in gt)gt[e](t,!1);else if(e in ft){const r=a(ft[e]);for(const e of r)t._el.addEventListener(e,n,i)}else t._el.addEventListener(e,n,i)}function mt(t,e,n){if(e in gt)t._events[e]&&t._events[e].length||gt[e](t,!0);else if(n&&e in ft){const i=a(ft[e]);for(const e of i)t._el.removeEventListener(e,n)}else n&&t._el.removeEventListener(e,n)}const yt={C:6,S:4,Q:4,A:7},vt=/[MmLlCcSsQqTtAa][0-9,.\-\s]+/g,xt=/-?([0-9]*\.)?[0-9]+/g;class bt{constructor(t){this._el=t,this._data={},this._events={},this.type="default",t._view=this}get id(){return this._el.id}get data(){return this._el.dataset}get tagName(){return this._el.tagName.toUpperCase()}equals(t){return this._el===t._el}addClass(t){for(const e of a(t))this._el.classList.add(e)}removeClass(t){for(const e of a(t))this._el.classList.remove(e)}hasClass(t){return this._el.classList.contains(t)}toggleClass(t){return this._el.classList.toggle(t)}setClass(t,e){e?this.addClass(t):this.removeClass(t)}attr(t){return this._el.getAttribute(t)||""}hasAttr(t){return this._el.hasAttribute(t)}setAttr(t,e){void 0===e?this.removeAttr(t):this._el.setAttribute(t,e.toString())}removeAttr(t){this._el.removeAttribute(t)}get attributes(){return Array.from(this._el.attributes||[])}get html(){return this._el.innerHTML||""}set html(t){this._el.innerHTML=t}get text(){return this._el.textContent||""}set text(t){this._el.textContent=t}set textStr(t){this._el.textContent=""+t}blur(){this._el.blur()}focus(){this._el.focus()}getParentModel(){const t=this.parent;return t?t.model||t.getParentModel():void 0}bindModel(t,e=!0){var n;if(!this.model){this.model=t;for(const{name:e,value:n}of this.attributes)if(e.startsWith("@")){const i=e.slice(1),r=it(n);this.removeAttr(e),this.on(i,()=>r(t))}else if(":show"===e){const i=it(n);this.removeAttr(e),t.watch(()=>this.toggle(!!i(t)))}else if(":html"===e){const i=it(n);this.removeAttr(e),t.watch(()=>this.html=i(t)||"")}else if(":draw"===e){const e=it(n);t.watch(()=>this.draw(e(t)))}else if(":bind"===e)this.bindVariable(t,n);else if(e.startsWith(":")){const i=it(n),r=e.slice(1);this.removeAttr(e),t.watch(()=>this.setAttr(r,i(t)))}else if(n.includes("${")){const i=st(n);t.watch(()=>this.setAttr(e,i(t)||""))}for(const i of this.childNodes)if(i instanceof Text){if(null===(n=i.textContent)||void 0===n?void 0:n.includes("${")){const e=st(i.textContent);t.watch(()=>i.textContent=e(t)||"")}}else e&&i.bindModel(t)}}bindVariable(t,e){}get bounds(){return this._el.getBoundingClientRect()}get isInViewport(){if(0===this.height)return!1;const t=this.bounds;return u(t.top,-t.height,Nt.height)}get topLeftPosition(){const t=this.bounds;return new v(t.left,t.top)}get boxCenter(){const t=this.bounds;return new v(t.left+t.width/2,t.top+t.height/2)}get scrollWidth(){return this._el.scrollWidth}get scrollHeight(){return this._el.scrollHeight}get scrollTop(){return this._el.scrollTop}set scrollTop(t){this._el.scrollTop=t,this.trigger("scroll",{top:t,left:this.scrollLeft})}get scrollLeft(){return this._el.scrollLeft}set scrollLeft(t){this._el.scrollLeft=t,this.trigger("scroll",{top:this.scrollTop,left:t})}scrollTo(t,e=1e3,i="cubic"){t<0&&(t=0);const r=this.scrollTop,s=t-r;this._data.scrollAnimation&&this._data.scrollAnimation.cancel(),this._data.scrollAnimation=function(t,e){if(0===e)return t(1,0,()=>void 0),Bt;const i=Date.now(),r=n();let s=0,o=!0;const a=()=>{o=!1,r.reject()};return function n(){o&&(!e||s<=e)&&window.requestAnimationFrame(n);const c=Date.now()-i;t(e?Math.min(1,c/e):c,c-s,a),e&&c>=e&&r.resolve();s=c}(),{cancel:a,promise:r.promise}}(t=>{const e=r+s*function(t,e=0,n=0){if(0===e)return 0;if(1===e)return 1;const[i,r]=t.split("-");return"in"===r?Ft(i,e,n):"out"===r?1-Ft(i,1-e,n):e<=.5?Ft(i,2*e,n)/2:1-Ft(i,2*(1-e),n)/2}(i,t);this.scrollTop=e,this.trigger("scroll",{top:e})},e)}scrollBy(t,e=1e3,n="cubic"){t&&this.scrollTo(this.scrollTop+t,e,n)}css(t,e){if(void 0===e){if("string"==typeof t)return window.getComputedStyle(this._el).getPropertyValue(t);{const e=Object.keys(t);for(const n of e)this._el.style.setProperty(n,""+t[n])}}else"string"==typeof t&&this._el.style.setProperty(t,""+e)}get transform(){return this.css("transform").replace("none","")}get transformMatrix(){const t=this.transform;if(!t)return[[1,0,0],[0,1,0]];const e=t.match(/matrix\(([0-9,.\s-]*)\)/);if(!e||!e[1])return[[1,0,0],[0,1,0]];const n=e[1].split(",");return[[+n[0],+n[2],+n[4]],[+n[1],+n[3],+n[5]]]}get scale(){const t=this.transformMatrix;return[t[0][0],t[1][1]]}setTransform(t,e=0,n=1){let i="";t&&(i+=`translate(${d(t.x,.1)}px,${d(t.y,.1)}px)`),e&&(i+=` rotate(${e}rad)`),n&&(i+=` scale(${n})`),this._el.style.transform=i}translate(t,e){this.setTransform(new v(t,e))}show(){this.hasAttr("hidden")&&this.removeAttr("hidden"),"visibility"===this.data.display?this._el.style.visibility="visible":this._el.style.display=this.data.display||"block"}hide(){"visibility"===this.data.display?this._el.style.visibility="hidden":this._el.style.display="none"}toggle(t){t?this.show():this.hide()}is(t){return this._el.matches?this._el.matches(t):Array.from(document.querySelectorAll(t)).includes(this._el)}index(){let t=0,e=this._el;for(;void 0!==(e=e.previousSibling||void 0);)++t;return t}prepend(t){const e=this._el.childNodes;e.length?this._el.insertBefore(t._el,e[0]):this._el.appendChild(t._el)}append(t){this._el.appendChild(t instanceof Text?t:t._el)}insertBefore(t){this.parent._el.insertBefore(t._el,this._el)}insertAfter(t){const e=this._el.nextSibling;e?this.parent._el.insertBefore(t._el,e):this.parent._el.appendChild(t._el)}get next(){return Ot(this._el.nextSibling)}get prev(){return Ot(this._el.previousSibling)}$(t){return Ot(t,this)}$$(t){return function(t,e){const n=e?e._el:document.documentElement,i=t?n.querySelectorAll(t):[];return Array.from(i,t=>Ot(t))}(t,this)}get parent(){return Ot(this._el.parentElement||void 0)}parents(t){const e=[];let n=this.parent;for(;n;)t&&!n.is(t)||e.push(n),n=n.parent;return e}hasParent(...e){const n=e.map(t=>t._el);let i=this._el.parentNode;for(;i;){if(t(i,...n))return!0;i=i.parentNode}return!1}get children(){return Array.from(this._el.children||[],t=>Ot(t))}get childNodes(){return Array.from(this._el.childNodes,t=>t instanceof Text?t:Ot(t))}remove(){this._el&&this._el.parentNode&&this._el.parentNode.removeChild(this._el)}removeChildren(){for(;this._el.firstChild;)this._el.removeChild(this._el.firstChild)}on(t,e,n){for(const i of a(t))i in this._events?this._events[i].includes(e)||this._events[i].push(e):this._events[i]=[e],wt(this,i,e,n)}one(t,e,n){const i=n=>{this.off(t,i),e(n)};this.on(t,i,n)}off(t,e){for(const n of a(t))n in this._events&&(this._events[n]=e?this._events[n].filter(t=>t!==e):[]),mt(this,n,e)}trigger(t,e={}){for(const n of a(t)){if(!this._events[n])return;for(const t of this._events[n])t.call(this,e)}}onKeyDown(t,e){const n=a(t).map(t=>Vt[t]||t);this._el.addEventListener("keydown",t=>{n.indexOf(t.keyCode)>=0&&e(t)})}onPromise(t,e=!1){return e?Promise.resolve():new Promise(t=>this.one("solve",()=>t()))}animate(t,e=400,n=0,i="ease-in-out"){return Ut(this,t,e,n,i)}enter(t="fade",e=500,n=0){return function(t,e="fade",n=500,i=0){if(t.show(),!Wt)return Bt;const r=+t.css("opacity")||1;if("fade"===e)return Ut(t,{opacity:[0,r]},n,i);if("pop"===e){const e=t.transform.replace(/scale\([0-9.]*\)/,"").replace(Xt,"translate($1px,$2px)");return Ut(t,{opacity:[0,r]},n,i),Ut(t,{transform:[e+" scale(0.5)",e+" scale(1)"]},n,i,"bounce-in")}if("descend"===e){return Ut(t,{opacity:[0,1],transform:["translateY(-50%)","none"]},n,i)}if(e.startsWith("draw")){const r=t.strokeLength;t.css("stroke-dasharray",r+"px"),t.css("opacity")||t.css("opacity",1);const s=Ut(t,{"stroke-dashoffset":[r+"px","draw-reverse"===e?2*r+"px":0]},n,i,"linear");return s.promise.then(()=>t.css("stroke-dasharray","")),s}if(e.startsWith("slide")){const s={opacity:[0,r],transform:["translateY(50px)","none"]};return e.includes("down")&&(s.transform[0]="translateY(-50px)"),e.includes("right")&&(s.transform[0]="translateX(-50px)"),e.includes("left")&&(s.transform[0]="translateX(50px)"),Ut(t,s,n,i)}if(e.startsWith("reveal")){const s={opacity:[0,r],height:[0,"auto"]};return e.includes("left")&&(s.transform=["translateX(-50%)","none"]),e.includes("right")&&(s.transform=["translateX(50%)","none"]),Ut(t,s,n,i)}return Bt}(this,t,e,n)}exit(t="fade",e=500,n=0,i=!1){return function(t,e="fade",n=400,i=0,r=!1){if(!t._el)return Bt;if(!Wt)return t.hide(),Bt;if("none"===t.css("display"))return Bt;let s;if("fade"===e)s=Ut(t,{opacity:[1,0]},n,i);else if("pop"===e){const e=t.transform.replace(/scale\([0-9.]*\)/,"");Ut(t,{opacity:[1,0]},n,i),s=Ut(t,{transform:[e+" scale(1)",e+" scale(0.5)"]},n,i,"bounce-out")}else if("ascend"===e){s=Ut(t,{opacity:[1,0],transform:["none","translateY(-50%)"]},n,i)}else if(e.startsWith("draw")){const r=t.strokeLength;t.css("stroke-dasharray",r),s=Ut(t,{"stroke-dashoffset":["draw-reverse"===e?2*r+"px":0,r+"px"]},n,i,"linear")}else if(e.startsWith("slide")){const r={opacity:0,transform:"translateY(50px)"};e.includes("up")&&(r.transform="translateY(-50px)"),s=Ut(t,r,n,i)}else if(e.startsWith("reveal")){const r={opacity:0,height:0};e.includes("left")&&(r.transform="translateX(-50%)"),e.includes("right")&&(r.transform="translateX(50%)"),s=Ut(t,r,n,i)}return s.promise.then(()=>r?t.remove():t.hide()),s}(this,t,e,n,i)}effect(t){this.one("animationend",()=>this.removeClass("effects-"+t)),this.addClass("effects-"+t)}copy(t=!0,e=!0){const n=Ot(this._el.cloneNode(t));return e&&n.copyInlineStyles(this,t),n}copyInlineStyles(t,e=!0){const n=window.getComputedStyle(t._el);for(const t of Array.from(n))this.css(t,n.getPropertyValue(t));if(e){const e=this.children,n=t.children;for(let t=0;t<e.length;++t)e[t].copyInlineStyles(n[t],!0)}}}class _t extends bt{get offsetTop(){return this._el.offsetTop}get offsetLeft(){return this._el.offsetLeft}get offsetParent(){return Ot(this._el.offsetParent||void 0)}get width(){return this._el.offsetWidth}get height(){return this._el.offsetHeight}get innerWidth(){const t=parseFloat(this.css("padding-left")),e=parseFloat(this.css("padding-right"));return this._el.clientWidth-t-e}get innerHeight(){const t=parseFloat(this.css("padding-bottom")),e=parseFloat(this.css("padding-top"));return this._el.clientHeight-t-e}get outerWidth(){const t=parseFloat(this.css("margin-left")),e=parseFloat(this.css("margin-right"));return this.width+t+e||0}get outerHeight(){const t=parseFloat(this.css("margin-bottom")),e=parseFloat(this.css("margin-top"));return this.height+t+e||0}get positionTop(){let t=this._el,e=0;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e}get positionLeft(){let t=this._el,e=0;for(;t;)e+=t.offsetLeft,t=t.offsetParent;return e}offset(t){if(t._el===this._el.offsetParent){const e=this.offsetTop+t._el.clientTop,n=this.offsetLeft+t._el.clientLeft;return{top:e,left:n,bottom:e+this.height,right:n+this.width}}{const e=t._el.getBoundingClientRect(),n=this._el.getBoundingClientRect();return{top:n.top-e.top,left:n.left-e.left,bottom:n.bottom-e.top,right:n.right-e.left}}}}class Ct extends bt{constructor(){super(...arguments),this.type="svg"}get $ownerSVG(){return Ot(this._el.ownerSVGElement||void 0)}get width(){return this.bounds.width}get height(){return this.bounds.height}get positionLeft(){const t=this._el.getBBox().x+this._el.getCTM().e;return this.$ownerSVG.positionLeft+t}get positionTop(){const t=this._el.getBBox().y+this._el.getCTM().f;return this.$ownerSVG.positionTop+t}get inverseTransformMatrix(){const t=this._el.getScreenCTM().inverse(),e=[[t.a,t.c,t.e],[t.b,t.d,t.f]];if(Nt.isFirefox){const t=this.transformMatrix;e[0][2]-=t[0][2],e[1][2]-=t[1][2]}return e}setTransform(t,e=0,n=1){const i=t?`translate(${d(t.x,.1)} ${d(t.y,.1)})`:"",r=h(e,0)?"":`rotate(${180*e/Math.PI})`,s=h(n,1)?"":`scale(${n})`;this.setAttr("transform",[i,r,s].join(" "))}get strokeLength(){if(this._el instanceof SVGGeometryElement)return this._el.getTotalLength();{const t=this.bounds;return 2*t.height+2*t.width}}getPointAtLength(t){if(this._el instanceof SVGGeometryElement){const e=this._el.getPointAtLength(t);return new v(e.x,e.y)}return new v(0,0)}getPointAt(t){return this.getPointAtLength(t*this.strokeLength)}get points(){return function(t){if(!t)return[];const e=t.match(vt)||[],n=[];for(const t of e){const e=(t.slice(1).match(xt)||[]).map(t=>+t),i=t[0].toUpperCase(),r=i!==t[0],o=yt[i]||2;for(let t=0;t<e.length;t+=o){const i=e[t+o-2],a=e[t+o-1];n.push(r?s(n).shift(i,a):new v(i,a))}}return n}(this.attr("d"))}set points(t){const e=t.length?"M"+t.map(t=>t.x+","+t.y).join("L"):"";this.setAttr("d",e)}addPoint(t){const e=this.attr("d")+" L "+t.x+","+t.y;this.setAttr("d",e)}get center(){const t=+this.attr("TEXT"===this.tagName?"x":"cx"),e=+this.attr("TEXT"===this.tagName?"y":"cy");return new v(t,e)}setCenter(t){this.setAttr("TEXT"===this.tagName?"x":"cx",t.x),this.setAttr("TEXT"===this.tagName?"y":"cy",t.y)}setLine(t,e){this.setAttr("x1",t.x),this.setAttr("y1",t.y),this.setAttr("x2",e.x),this.setAttr("y2",e.y)}setRect(t){this.setAttr("x",t.p.x),this.setAttr("y",t.p.y),this.setAttr("width",t.w),this.setAttr("height",t.h)}draw(t,e={}){if(!t)return this.setAttr("d","");const n={mark:this.attr("mark"),arrows:this.attr("arrows"),size:+this.attr("size")||void 0,fill:this.hasClass("fill"),round:this.hasAttr("round")};this.setAttr("d",H(t,function(t,e){for(const n of Object.keys(e))Object.prototype.hasOwnProperty.call(t,n)||(t[n]=e[n]);return t}(e,n)))}}class At extends Ct{get viewBox(){return this._el.viewBox.baseVal||{width:0,height:0}}get $ownerSVG(){return this}get positionLeft(){return parseInt(this.css("margin-left"))+this.parent.positionLeft}get positionTop(){return parseInt(this.css("margin-top"))+this.parent.positionTop}get svgWidth(){return this.viewBox.width||this.width}get svgHeight(){return this.viewBox.height||this.height}pngImage(t,e){return R(this,void 0,void 0,(function*(){const n=this.copy(!0,!0);e||(e=t||this.svgHeight),t||(t=this.svgWidth),n.setAttr("width",t),n.setAttr("height",e),n.setAttr("viewBox",this.attr("viewBox")||`0 0 ${this.svgWidth} ${this.svgHeight}`);const i=(new XMLSerializer).serializeToString(n._el);let r="data:image/svg+xml;utf8,"+encodeURIComponent(i);r=r.replace("svg ",'svg xmlns="http://www.w3.org/2000/svg" ');const s=St("canvas",{width:t,height:e});s.ctx.fillStyle="#fff",s.ctx.fillRect(0,0,t,e);const o=yield function(t){return new Promise(e=>{const n=new Image;n.onload=()=>e(n),n.src=t})}(r);return s.ctx.drawImage(o,0,0,t,e),s.pngImage}))}downloadImage(t,e){const n=Nt.isIOS?window.open("","_blank"):void 0;this.pngImage(e).then(e=>{if(n)return n.location.href=e;St("a",{download:t,href:e,target:"_blank"})._el.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}))})}}class Mt extends _t{constructor(){super(...arguments),this.type="window"}get width(){return window.innerWidth}get height(){return window.innerHeight}get innerWidth(){return window.innerWidth}get innerHeight(){return window.innerHeight}get outerWidth(){return window.outerWidth}get outerHeight(){return window.outerHeight}get scrollWidth(){return document.body.scrollWidth}get scrollHeight(){return document.body.scrollHeight}get scrollTop(){return window.pageYOffset}set scrollTop(t){document.body.scrollTop=document.documentElement.scrollTop=t,this.trigger("scroll",{top:t,left:this.scrollLeft})}get scrollLeft(){return window.pageXOffset}set scrollLeft(t){document.body.scrollLeft=document.documentElement.scrollLeft=t,this.trigger("scroll",{top:this.scrollTop,left:t})}}class kt extends _t{constructor(){super(...arguments),this.type="form"}get action(){return this._el.action}get formData(){const t={};for(const e of Array.from(this._el.elements)){const n=e.name||e.id;n&&(t[n]=e.value)}return t}get isValid(){return this._el.checkValidity()}}class Lt extends _t{constructor(){super(...arguments),this.type="input"}get checked(){return this._el instanceof HTMLInputElement&&this._el.checked}get value(){return this._el.value}set value(t){this._el.value=t}bindVariable(t,e){t[e]=this.value,this.change(n=>t[e]=n),t.watch(()=>this.value=t[e])}change(t){let e=this.value||"";this.on("change keyup input paste",()=>{this.value!==e&&(e=this.value.trim(),t(e))})}validate(t){this.change(e=>this.setValidity(t(e)))}setValidity(t){this._el.setCustomValidity(t)}get isValid(){return this._el.checkValidity()}}class Tt extends _t{constructor(){super(...arguments),this.type="canvas"}getContext(t="2d",e={}){return this._el.getContext(t,e)}get pngImage(){return this._el.toDataURL("image/png")}get canvasWidth(){return this._el.width}get canvasHeight(){return this._el.height}get ctx(){return this._ctx||(this._ctx=this.getContext()),this._ctx}draw(t,e={}){this.ctx.save(),function(t,e,n={}){if(n.fill&&(t.fillStyle=n.fill),n.opacity&&(t.globalAlpha=n.opacity),n.stroke&&(t.strokeStyle=n.stroke,t.lineWidth=n.strokeWidth||1,n.lineCap&&(t.lineCap=n.lineCap),n.lineJoin&&(t.lineJoin=n.lineJoin)),t.beginPath(),k(e))t.moveTo(e.p1.x,e.p1.y),t.lineTo(e.p2.x,e.p2.y);else if(L(e))t.arc(e.c.x,e.c.y,e.r,0,2*Math.PI);else if(C(e)){t.moveTo(e.points[0].x,e.points[0].y);for(const n of e.points.slice(1))t.lineTo(n.x,n.y);t.closePath()}else if(A(e)){t.moveTo(e.points[0].x,e.points[0].y);for(const n of e.points.slice(1))t.lineTo(n.x,n.y)}n.fill&&t.fill(),n.stroke&&t.stroke()}(this.ctx,t,e),this.ctx.restore()}clear(){this.ctx.clearRect(0,0,this.canvasWidth,this.canvasHeight)}fill(t){this.ctx.save(),this.ctx.fillStyle=t,this.ctx.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.ctx.restore()}clearCircle(t,e){this.ctx.save(),this.ctx.globalCompositeOperation="destination-out",this.ctx.beginPath(),this.ctx.arc(t.x,t.y,e,0,2*Math.PI,!1),this.ctx.fill(),this.ctx.restore()}downloadImage(t){St("a",{download:t,href:this.pngImage,target:"_blank"})._el.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}))}}class $t extends _t{play(){return this._el.play()||Promise.resolve()}pause(){return this._el.pause()}}const Et=["path","rect","circle","ellipse","polygon","polyline","g","defs","marker","line","text","pattern","mask","svg","foreignObject"];function Ot(t,e){if(!t)return;const n=e?e._el:document.documentElement,i="string"==typeof t?n.querySelector(t):t;if(!i)return;if(i._view)return i._view;const r=(i.tagName||"").toLowerCase();return"svg"===r?new At(i):"canvas"===r?new Tt(i):"form"===r?new kt(i):"input"===r||"select"===r||"textarea"===r?new Lt(i):"video"===r||"audio"===r?new $t(i):Et.includes(r)?new Ct(i):new _t(i)}function St(t,e={},n){const i=Et.includes(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);for(const[t,n]of Object.entries(e))void 0!==n&&("id"===t?i.id=n:"html"===t?i.innerHTML=n:"text"===t?i.textContent=n:"path"===t?i.setAttribute("d",H(n)):i.setAttribute(t,n));const r=Ot(i);return n&&n.append(r),r}const Pt=new Mt(document.body),It=new Mt(document.documentElement),Vt={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,capslock:20,escape:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46};var Nt;!function(t){const e=window.navigator.userAgent.toLowerCase();t.isMobile=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e),t.isRetina=(window.devicePixelRatio||1)>1,t.isTouch=!!window.Touch||"ontouchstart"in window,t.isChrome=!!window.chrome,t.isFirefox=e.indexOf("firefox")>=0,t.isAndroid=e.indexOf("android")>=0,t.isIOS=/iphone|ipad|ipod/i.test(e),t.isSafari=t.isIOS||/^((?!chrome|android).)*safari/i.test(e),t.redraw=function(){document.body.offsetHeight};const n=[];let s=!1;function o(){if(!s){s=!0;for(const t of n)t();setTimeout(h)}}window.onload=o,document.addEventListener("DOMContentLoaded",o),t.ready=function(t){s?t():n.push(t)};const c=[];t.width=window.innerWidth,t.height=window.innerHeight;const l=i(()=>{t.width=window.innerWidth,t.height=window.innerHeight;for(const e of c)e({width:t.width,height:t.height});Pt.trigger("scroll",{top:Pt.scrollTop})});function h(){l()}function u(t,e,n=31536e3){const i=window.location.hostname.replace(/^[a-z]{2}\./,"");document.cookie=`${t}=${e};path=/;max-age=${n};domain=${i}`}t.onResize=function(e){e({width:t.width,height:t.height}),c.push(e)},t.offResize=function(t){const e=c.indexOf(t);e>=0&&c.splice(e,1)},t.resize=h,window.addEventListener("resize",()=>{const e=window.innerWidth,n=window.innerHeight;t.width===e&&t.height===n||(t.width=e,t.height=n,l())}),t.getHash=function(){return window.location.hash.slice(1)},t.setHash=function(t){const e=document.body.scrollTop;window.location.hash=t,document.body.scrollTop=e},t.getCookies=function(){const t=document.cookie.split(";"),e={};for(let n=0,i=t.length;n<i;++n){const i=t[n].split("=");i[0]=i[0].replace(/^\s+|\s+$/,""),e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e},t.getCookie=function(t){const e=document.cookie.match(new RegExp(`(^|;) ?${t}=([^;]*)(;|$)`));return e?e[2]:void 0},t.setCookie=u,t.deleteCookie=function(t){u(t,"",-1)};const d="_M";function p(t,e){const n=(t||"").split("."),i=r(window.localStorage.getItem(d)||void 0);let s=i;for(let t=0;t<n.length-1;++t)null==s[n[t]]&&(s[n[t]]={}),s=s[n[t]];s[n[n.length-1]]=e,window.localStorage.setItem(d,JSON.stringify(i))}function f(){const t=document.activeElement;return t===document.body?void 0:Ot(t)}t.setStorage=p,t.getStorage=function(t){let e=r(window.localStorage.getItem(d)||void 0);if(!t)return e;const n=(t||"").split("."),i=n.pop();for(const t of n){if(!(t in e))return;e=e[t]}return e[i]},t.deleteStorage=function(t){t?p(t,void 0):window.localStorage.setItem(d,"")},t.getActiveInput=f;const g={};for(const[t,e]of Object.entries(Vt))g[e]=t;t.onKey=function(t,e,n=!1){const i=a(t),r=n?"keyup":"keydown";document.addEventListener(r,t=>{const n=g[t.keyCode]||t.key;if(!i.includes(n))return;const r=f();r&&r.is("input, textarea, [contenteditable]")||r&&["space","enter","tab"].includes(n)&&r.is("button, a, [tabindex]")||e(t,n)})}}(Nt||(Nt={}));const qt=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/.test(navigator.userAgent)||+(navigator.userAgent.match(/\bEdge\/12\.(\d+)\b/)||[])[1]<10547||+(navigator.userAgent.match(/\bAppleWebKit\/(\d+)\b/)||[])[1]<537,Ht={};function Rt(){if(!qt)return;Array.from(document.querySelectorAll("svg > use")).forEach((function(t){const e=t.getAttribute("xlink:href"),[n,i]=e.split("#");if(!n.length||!i)return;const r=t.parentNode;r.removeChild(t),n in Ht||(Ht[n]=fetch(n).then(t=>t.text())),Ht[n].then(t=>{const e=document.implementation.createHTMLDocument("");e.documentElement.innerHTML=t;const n=e.getElementById(i).cloneNode(!0),s=document.createDocumentFragment();for(;n.childNodes.length;)s.appendChild(n.firstChild);r.appendChild(s)})}))}let Wt=!1;setTimeout(()=>Wt=!0);const jt="cubic-bezier(0.175, 0.885, 0.32, 1.275)",zt="cubic-bezier(0.68, -0.275, 0.825, 0.115)",Bt={cancel:()=>void 0,promise:Promise.resolve()};function Ft(t,e=0,n=0){switch(t){case"quad":return Math.pow(e,2);case"cubic":return Math.pow(e,3);case"quart":return Math.pow(e,4);case"quint":return Math.pow(e,5);case"circ":return 1-Math.sqrt(1-Math.pow(e,2));case"sine":return 1-Math.cos(e*Math.PI/2);case"exp":return e<=0?0:Math.pow(2,10*(e-1));case"back":return n||(n=1.70158),e*e*((n+1)*e-n);case"elastic":return n||(n=.3),-Math.pow(2,10*(e-1))*Math.sin((2*(e-1)/n-.5)*Math.PI);case"swing":return.5-Math.cos(e*Math.PI)/2;case"spring":return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e);case"bounce":return e<1/11?1/64-7.5625*(.5/11-e)*(.5/11-e):e<3/11?1/16-7.5625*(2/11-e)*(2/11-e):e<7/11?.25-7.5625*(5/11-e)*(5/11-e):1-7.5625*(1-e)*(1-e);default:return e}}function Ut(t,e,i=400,r=0,s="ease-in-out"){if(!Wt)return Object.keys(e).forEach(n=>{const i=e[n];t.css(n,Array.isArray(i)?i[1]:i)}),Bt;"bounce-in"===s&&(s=jt),"bounce-out"===s&&(s=zt);let a="";Nt.isSafari&&(a=t._el.style.transition,t.css("transition","none"),Nt.redraw());const c=t._data.animation;c&&c.cancel();const l={},h={},u=n(),d=window.getComputedStyle(t._el);Object.keys(e).forEach(n=>{const i=e[n],s=function(t){return t.toLowerCase().replace(/^-/,"").replace(/-(.)/g,(t,e)=>e.toUpperCase())}(n);h[s]=Array.isArray(i)?i[0]:d.getPropertyValue(n),l[s]=Array.isArray(i)?i[1]:i,r&&t.css(n,h[s])});const p=l.height;let f;"auto"===l.height&&(l.height=o(t.children.map(t=>t.outerHeight))+"px");let g=!1;!function(t,e=0){e?setTimeout(t,e):t()}(()=>{g||((f=t._el.animate([h,l],{duration:i,easing:s,fill:"forwards"})).onfinish=()=>{t._el&&Object.keys(e).forEach(e=>t.css(e,"height"===e?p:l[e])),Nt.isSafari&&t.css("transition",a),u.resolve(),f.cancel()})},r);const w={cancel(){g=!0,t._el&&Object.keys(e).forEach(e=>t.css(e,t.css(e))),f&&f.cancel()},promise:u.promise};return setTimeout(()=>t._data.animation=w),w}const Xt=/matrix\([0-9.\-\s]+,[0-9.\-\s]+,[0-9.\-\s]+,[0-9.\-\s]+,([0-9.\-\s]+),([0-9.\-\s]+)\)/;function Dt(t,e){const n=e.regex.exec(t);if(n){n.shift();const t={};for(const[i,r]of e.params.entries())t[r]=n[i];return t}}let Gt="complete"===document.readyState;window.addEventListener("load",()=>setTimeout(()=>Gt=!0)),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");new class extends c{constructor(){super(...arguments),this.$viewport=Pt,this.views=[],this.active={path:"",hash:"",index:0},this.search=window.location.search,this.preloaded=!1,this.transition=!1,this.noLoad=!1,this.initialise=()=>void 0}setup(t={}){t.$viewport&&(this.$viewport=t.$viewport),t.initialise&&(this.initialise=t.initialise),t.preloaded&&(this.preloaded=t.preloaded),t.transition&&(this.transition=t.transition),t.noLoad&&(this.noLoad=t.noLoad),t.click&&Pt.on("click",t=>this.onLinkClick(t)),t.history&&window.addEventListener("popstate",t=>{Gt&&t.state&&this.goToState(t.state)})}view(t,{enter:e,exit:n,template:i}={}){const r=(t.match(/:\w+/g)||[]).map(t=>t.substr(1)),s=t.replace(/:\w+/g,"([\\w-]+)").replace("/","\\/")+"\\/?",o=t.includes("?")?"":"(\\?.*)?",a={regex:new RegExp("^"+s+o+"$","i"),params:r,enter:e,exit:n,template:i};this.views.push(a);const c=Dt(window.location.pathname,a);c&&(this.active={path:window.location.pathname+this.search,hash:window.location.hash,index:0},window.history.replaceState(this.active,"",this.active.path+this.active.hash),Nt.ready(()=>{setTimeout(()=>{this.preloaded?(this.initialise(this.$viewport,c),a.enter&&a.enter(this.$viewport,c)):this.loadView(a,c,window.location.pathname)})}))}paths(...t){for(const e of t)this.view(e)}getView(t){for(const e of this.views){const n=Dt(t,e);if(n)return{view:e,params:n}}}load(t,e=""){const n=this.getView(t);return t===this.active.path&&e!==this.active.hash?(this.trigger("hashChange",e.slice(1)),this.trigger("change",t+e),!0):!(!n||t===this.active.path)&&(this.trigger("change",t+e),window.ga&&window.ga("send","pageview",t+e),this.noLoad?n.view.enter&&n.view.enter(this.$viewport,n.params):this.loadView(n.view,n.params,t),!0)}loadView(t,e={},n=""){return R(this,void 0,void 0,(function*(){this.$viewport.css({opacity:.4,"pointer-events":"none"});const i=yield function(t,e,n){return R(this,void 0,void 0,(function*(){if(t.template)return"string"==typeof t.template?t.template:t.template(e);return(yield fetch(n+(n.indexOf("?")>=0?"&xhr=1":"?xhr=1"))).text()}))}(t,e,n);this.$viewport.css("opacity",0),setTimeout(()=>{this.$viewport.removeChildren(),Pt.scrollTop=0,this.$viewport.html=i,Nt.resize(),Rt(),this.$viewport.css({opacity:1,"pointer-events":"all"});const n=this.$viewport.$("title");n&&(document.title=n.text),this.initialise(this.$viewport,e),t.enter&&t.enter(this.$viewport,e),this.trigger("afterChange",{$viewport:this.$viewport})},350)}))}onLinkClick(t){if(t.metaKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;let e=t.target;for(;e&&"A"!==e.nodeName;)e=e.parentNode;if(!e||"A"!==e.nodeName)return;const n=e;if(n.target)return;if(n.origin!==window.location.origin)return;if(n.hasAttribute("download")||"external"===n.getAttribute("rel"))return;const i=n.getAttribute("href");i&&i.indexOf("mailto:")>-1||this.goTo(n.pathname+n.search,n.hash)&&t.preventDefault()}goToState(t){if(!t||!t.path)return;const e=this.load(t.path+this.search,t.hash);e&&t.index<this.active.index&&this.trigger("back"),e&&t.index>this.active.index&&this.trigger("forward"),this.active=t}goTo(t,e=""){const n=this.load(t,e);if(n){const n=this.active?this.active.index+1:0;this.active={path:t,hash:e,index:n},window.history.pushState(this.active,"",t+e)}return n}back(){window.history.back()}forward(){window.history.forward()}};const Kt=new Map;class Yt extends HTMLElement{constructor(){super(...arguments),this.wasConnected=!1,this.isReady=!1}connectedCallback(){return R(this,void 0,void 0,(function*(){if(this.wasConnected)return void this._view.trigger("connected");this.wasConnected=!0,this.isReady=!1,this._view.created();const t=Kt.get(this._view.tagName)||{};(t.template||t.templateId)&&function(t,e){const n=Array.from(t.childNodes);if(e.template)t.innerHTML=e.template;else if(e.templateId){const n=document.querySelector(e.templateId);if(!n)throw new Error(`Template not found: ${e.templateId}`);for(;t.firstChild;)t.removeChild(t.firstChild);const i=n.content,r=document.importNode(i,!0);t.appendChild(r)}if(!n.length)return;const i=t.querySelector("slot:not([name])");for(const e of n){const n=e.getAttribute?e.getAttribute("slot"):void 0,r=n?t.querySelector(`slot[name="${n}"]`):i;r&&r.parentNode.insertBefore(e,r)}for(const e of Array.from(t.querySelectorAll("slot")))e.parentNode.removeChild(e)}(this,t);const e=function t(e){const n=[];for(const i of Array.from(e.children))i.tagName.startsWith("X-")?n.push(i):n.push(...t(i));return n}(this).filter(t=>!t.isReady).map(t=>new Promise(e=>t.addEventListener("ready",e)));yield Promise.all(e),this._view.ready(),this.dispatchEvent(new CustomEvent("ready")),this.isReady=!0}))}disconnectedCallback(){this._view.trigger("disconnected")}attributeChangedCallback(t,e,n){this._view.trigger("attr:"+t,{newVal:n,oldVal:e})}}class Jt extends _t{created(){}ready(){}}let Zt=class extends Jt{constructor(){super(...arguments),this.isOpen=!1}ready(){this.animation=this.attr("animation")||"pop",this.$bubble=this.$(".popup-body"),this.$bubble.hide(),this.$(".popup-target").on("click",()=>this.toggle()),this.on("clickOutside",()=>this.close());for(const t of this.$bubble.$$("a"))t.on("click",()=>this.close());Nt.onKey("escape",()=>this.close())}toggle(){this.isOpen?this.close():this.open()}open(){this.isOpen||(this.isOpen=!0,this.addClass("active"),this.$bubble.enter(this.animation,200))}close(){this.isOpen&&(this.isOpen=!1,this.removeClass("active"),this.$bubble.exit(this.animation,200))}};Zt=function(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}([function(t,e={}){return function(n){class i extends Yt{constructor(){super(),this._view=new n(this)}}i.observedAttributes=e.attributes||[],Kt.set(t.toUpperCase(),e),window.customElements.define(t,i)}}("x-popup")],Zt),It.addClass((Nt.isMobile?"is":"not")+"-mobile"),Rt(),Nt.ready(()=>{const t=Ot(".api-body");if(!t)return;const e=Ot(".sidebar-body"),n=[];let i,r,s;t.$$("h2, h3").forEach((t,r)=>{const s=t.$("a").id;let o,a;t.is("h2")?(o=St("a",{href:"#"+s,html:t.text},e),i=a=St("div",{class:"hidden"},e)):(o=St("a",{href:"#"+s,html:s.replace("+","#").replace("module_","")},i),a=i),Nt.onResize(()=>n[r]=[t.positionTop,o,a])}),Pt.on("scroll",(function({top:t}){let e=function(t){for(let e of n)if(e[0]>t)return e}(t);e[1]!==r&&(r&&r.removeClass("active"),(r=e[1]).addClass("active")),e[2]!==s&&(s&&s.addClass("hidden"),(s=e[2])&&s.removeClass("hidden"))}))})}();